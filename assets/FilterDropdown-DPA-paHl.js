import{r as n,j as s,u as S}from"./index-C4v1btYE.js";import{M as N,i as z,u as R,P as I,a as W,b as A,L as D,m as F}from"./proxy-ByQ6fgdm.js";class U extends n.Component{getSnapshotBeforeUpdate(i){const t=this.props.childRef.current;if(t&&i.isPresent&&!this.props.isPresent){const l=t.offsetParent,d=z(l)&&l.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=d-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function B({children:u,isPresent:i,anchorX:t}){const l=n.useId(),d=n.useRef(null),r=n.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=n.useContext(N);return n.useInsertionEffect(()=>{const{width:m,height:c,top:y,left:o,right:e}=r.current;if(i||!d.current||!m||!c)return;const a=t==="left"?`left: ${o}`:`right: ${e}`;d.current.dataset.motionPopId=l;const p=document.createElement("style");return h&&(p.nonce=h),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${c}px !important;
            ${a}px !important;
            top: ${y}px !important;
          }
        `),()=>{document.head.contains(p)&&document.head.removeChild(p)}},[i]),s.jsx(U,{isPresent:i,childRef:d,sizeRef:r,children:n.cloneElement(u,{ref:d})})}const H=({children:u,initial:i,isPresent:t,onExitComplete:l,custom:d,presenceAffectsLayout:r,mode:h,anchorX:m})=>{const c=R(K),y=n.useId();let o=!0,e=n.useMemo(()=>(o=!1,{id:y,initial:i,isPresent:t,custom:d,onExitComplete:a=>{c.set(a,!0);for(const p of c.values())if(!p)return;l&&l()},register:a=>(c.set(a,!1),()=>c.delete(a))}),[t,c,l]);return r&&o&&(e={...e}),n.useMemo(()=>{c.forEach((a,p)=>c.set(p,!1))},[t]),n.useEffect(()=>{!t&&!c.size&&l&&l()},[t]),h==="popLayout"&&(u=s.jsx(B,{isPresent:t,anchorX:m,children:u})),s.jsx(I.Provider,{value:e,children:u})};function K(){return new Map}const w=u=>u.key||"";function _(u){const i=[];return n.Children.forEach(u,t=>{n.isValidElement(t)&&i.push(t)}),i}const G=({children:u,custom:i,initial:t=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:r="sync",propagate:h=!1,anchorX:m="left"})=>{const[c,y]=W(h),o=n.useMemo(()=>_(u),[u]),e=h&&!c?[]:o.map(w),a=n.useRef(!0),p=n.useRef(o),C=R(()=>new Map),[L,M]=n.useState(o),[g,E]=n.useState(o);A(()=>{a.current=!1,p.current=o;for(let x=0;x<g.length;x++){const f=w(g[x]);e.includes(f)?C.delete(f):C.get(f)!==!0&&C.set(f,!1)}},[g,e.length,e.join("-")]);const b=[];if(o!==L){let x=[...o];for(let f=0;f<g.length;f++){const v=g[f],k=w(v);e.includes(k)||(x.splice(f,0,v),b.push(v))}return r==="wait"&&b.length&&(x=b),E(_(x)),M(o),null}const{forceRender:j}=n.useContext(D);return s.jsx(s.Fragment,{children:g.map(x=>{const f=w(x),v=h&&!c?!1:o===g||e.includes(f),k=()=>{if(C.has(f))C.set(f,!0);else return;let P=!0;C.forEach($=>{$||(P=!1)}),P&&(j==null||j(),E(p.current),h&&(y==null||y()),l&&l())};return s.jsx(H,{isPresent:v,initial:!a.current||t?void 0:!1,custom:i,presenceAffectsLayout:d,mode:r,onExitComplete:v?void 0:k,anchorX:m,children:x},f)})})};function V({options:u,selectedOption:i,onSelect:t,label:l,paramName:d}){const[r,h]=n.useState(!1),m=n.useRef(null),[c,y]=S(),o=e=>{if(t(e),d){const a=new URLSearchParams(c);e?a.set(d,e):a.delete(d),y(a)}h(!1)};return n.useEffect(()=>{function e(a){m.current&&!m.current.contains(a.target)&&h(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),s.jsxs("div",{className:"relative shrink-0",ref:m,children:[s.jsxs("button",{onClick:()=>h(!r),className:`px-3 py-2 rounded-lg border border-[color-mix(in_oklch,var(--color-primary)_20%,transparent)] 
                 hover:border-[color-mix(in_oklch,var(--color-primary)_40%,transparent)] transition-colors
                 flex items-center justify-between min-w-[120px] sm:min-w-[160px] bg-background text-sm sm:text-base cursor-pointer`,children:[s.jsxs("span",{className:"mr-2 truncate",children:[l,":"]}),s.jsx("span",{className:"font-medium truncate",children:i||"All"}),s.jsx("svg",{className:`w-4 h-4 ml-2 transition-transform shrink-0 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s.jsx(G,{children:r&&s.jsx(F.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`absolute z-[1] w-full mt-2 bg-background
                     border border-[color-mix(in_oklch,var(--color-primary)_20%,transparent)] rounded-lg shadow-lg`,children:s.jsxs("ul",{className:"py-1 max-h-[60vh] overflow-y-auto",children:[s.jsx("li",{children:s.jsx("button",{onClick:()=>o(""),className:`w-full px-4 py-2 text-left hover:bg-[color-mix(in_oklch,var(--color-primary)_10%,transparent)] text-sm sm:text-base
                           ${i?"":"bg-[color-mix(in_oklch,var(--color-primary)_5%,transparent)] cursor-pointer"}`,children:"All"})}),u.map(e=>s.jsx("li",{children:s.jsx("button",{onClick:()=>o(e),className:`cursor-pointer w-full px-4 py-2 text-left hover:bg-[color-mix(in_oklch,var(--color-primary)_10%,transparent)] text-sm sm:text-base
                             ${i===e?"bg-[color-mix(in_oklch,var(--color-primary)_5%,transparent)] cursor-pointer":""}`,children:e})},e))]})})})]})}export{V as F};
